!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e){var n=t("../dispatcher/appDispatcher"),i=t("../constants/todoConstants"),r={create:function(t){n.handleViewAction({actionType:i.TODO_CREATE,text:t})},update:function(t,e){n.handleViewAction({actionType:i.TODO_UPDATE,id:t,update:e})},toggleComplete:function(t){n.handleViewAction({actionType:i.TODO_COMPLETE_TOGGLE,id:t})},distroy:function(t){n.handleViewAction({actionType:i.TODO_DISTROY,id:t})},clearCompleted:function(){n.handleViewAction({actionType:i.CLEAR_COMPLETED})},toggleAll:function(){n.handleViewAction({actionType:i.TODO_COMPLETE_ALL})}};e.exports=r},{"../constants/todoConstants":9,"../dispatcher/appDispatcher":11}],2:[function(t,e){e.exports=t(1)},{"../constants/todoConstants":9,"../dispatcher/appDispatcher":11}],3:[function(t,e){function n(){return{allTodos:i.getAll(),allComplete:i.isAllComplete()}}var i=t("../stores/todoStore"),r=t("../actions/todoAction"),o=t("./todoHeader"),s=t("./todoList"),a=t("./todoFooter"),c=React.createClass({displayName:"TodoApp",getInitialState:function(){return n()},componentDidMount:function(){i.addChangeListener(this._onChange)},componentWillUnmount:function(){i.removeChangeListener(this._onChange)},render:function(){return React.DOM.div(null,o(null),React.DOM.section({id:"main"},React.DOM.input({id:"toggle-all",type:"checkbox",checked:this.state.allComplete,onClick:this._toggleAll}),React.DOM.label({htmlFor:"toggle-all"},"Mark all as complete"),s({allTodos:this.state.allTodos})),a({allTodos:this.state.allTodos}))},_onChange:function(){this.setState(n())},_toggleAll:function(){r.toggleAll()}});e.exports=c},{"../actions/todoAction":2,"../stores/todoStore":14,"./todoFooter":4,"./todoHeader":5,"./todoList":8}],4:[function(t,e){var n=(t("../stores/todoStore"),t("../actions/todoAction")),i=React.createClass({displayName:"TodoFooter",getInitialState:function(){return{allTodos:this.props.allTodos}},render:function(){var t=0,e=0,n=this.state.allTodos;for(var i in n)t++,n[i].complete===!0&&e++;var r=t-e,o=[React.DOM.span({id:"todo-count"},React.DOM.span(null,r)," items left.")];return e>0&&o.push(React.DOM.span({id:"clear-completed",onClick:this._clearCompleted},"Clear completed(",React.DOM.span(null,e),")")),React.DOM.footer({id:"footer"},o)},_clearCompleted:function(){n.clearCompleted()}});e.exports=i},{"../actions/todoAction":2,"../stores/todoStore":14}],5:[function(t,e){var n=t("../actions/todoAction"),i=t("./todoInput"),r=React.createClass({displayName:"todoHeader",render:function(){return React.DOM.header({id:"header"},React.DOM.h1(null,"todos"),i({onSave:this._create}))},_create:function(t){t.trim()&&n.create(t)}});e.exports=r},{"../actions/todoAction":2,"./todoInput":6}],6:[function(t,e){var n=13,i=React.createClass({displayName:"todoInput",getInitialState:function(){return{value:this.props.value||""}},render:function(){return React.DOM.input({id:"new-todo",placeholder:this.props.placeholder,type:"text",value:this.state.value,autoFocus:!0,onChange:this._onChange,onKeyDown:this._onKeyDown,onBlur:this._onSave})},_onSave:function(){this.props.onSave(this.state.value),this.setState({value:""})},_onChange:function(t){this.setState({value:t.target.value})},_onKeyDown:function(t){t.keyCode===n&&this._onSave()}});e.exports=i},{}],7:[function(t,e){var n=t("../actions/TodoAction"),i=t("./todoInput"),r=React.createClass({displayName:"todoItem",getInitialState:function(){return{editing:!1}},render:function(){var t=this.props.todo,e=null,n=null;return t.complete&&(e="completed"),this.state.editing&&(e="editing",n=i({value:t.text,onSave:this._updateText})),React.DOM.li({className:e,"data-todoid":t.id},React.DOM.div({className:"view"},React.DOM.input({className:"toggle",type:"checkbox",checked:t.complete,onClick:this._toggleComplete}),React.DOM.label({onDoubleClick:this._startEditing},t.text),React.DOM.button({className:"destroy",onClick:this._distroy})),n)},_startEditing:function(){this.setState({editing:!0})},_updateText:function(t){n.update(this.props.todo.id,{text:t}),this.setState({editing:!1})},_toggleComplete:function(){n.toggleComplete(this.props.todo.id)},_distroy:function(){n.distroy(this.props.todo.id)}});e.exports=r},{"../actions/TodoAction":1,"./todoInput":6}],8:[function(t,e){var n=t("./todoItem"),i=React.createClass({displayName:"todoList",render:function(){var t=this.props.allTodos,e=[];for(var i in t)e.push(n({key:i,todo:t[i]}));if(0===e.length){e=[React.DOM.li(null," ",React.DOM.label(null,"No todo yet.")," ")]}return React.DOM.ul({id:"todo-list"},e)}});e.exports=i},{"./todoItem":7}],9:[function(t,e){var n=t("react/lib/keyMirror");e.exports=n({TODO_CREATE:null,TODO_COMPLETE_TOGGLE:null,TODO_UPDATE:null,TODO_DISTROY:null,CLEAR_COMPLETED:null,TODO_COMPLETE_ALL:null,TODO_:null})},{"react/lib/keyMirror":19}],10:[function(t,e){function n(){"use strict";this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var i=t("./invariant"),r=1,o="ID_";n.prototype.register=function(t){"use strict";var e=o+r++;return this.$Dispatcher_callbacks[e]=t,e},n.prototype.unregister=function(t){"use strict";i(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},n.prototype.waitFor=function(t){"use strict";i(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?i(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(i(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},n.prototype.dispatch=function(t){"use strict";i(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},n.prototype.isDispatching=function(){"use strict";return this.$Dispatcher_isDispatching},n.prototype.$Dispatcher_invokeCallback=function(t){"use strict";this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},n.prototype.$Dispatcher_startDispatching=function(t){"use strict";for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},n.prototype.$Dispatcher_stopDispatching=function(){"use strict";this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},e.exports=n},{"./invariant":12}],11:[function(t,e){var n=t("./Dispatcher"),i=t("react/lib/copyProperties"),r=i(new n,{handleViewAction:function(t){this.dispatch({source:"VIEW_ACTION",action:t})}});e.exports=r},{"./Dispatcher":10,"react/lib/copyProperties":17}],12:[function(t,e){"use strict";var n=function(t,e,n,i,r,o,s,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,r,o,s,a],u=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return l[u++]}))}throw c.framesToPop=1,c}};e.exports=n},{}],13:[function(t){console.log("js file change will trigger: bundle by browserify & then trigger live reload");var e=t("./components/todoApp");React.renderComponent(e(null),document.getElementById("todoapp"))},{"./components/todoApp":3}],14:[function(t,e){function n(t){var e=Date.now(),n={id:e,complete:!1,text:t};f[e]=n}function i(t,e){f[t]=u(f[t],e)}function r(t){for(var e in f)i(e,t)}function o(t){i(t,{complete:!f[t].complete})}function s(){for(var t in f)complete(t)}function a(t){delete f[t]}function c(){for(var t in f)f[t].complete&&delete f[t]}var l=t("events").EventEmitter,u=t("react/lib/merge"),p=t("../dispatcher/appDispatcher"),h=t("../constants/todoConstants"),d="change",f={111:{id:111,complete:!1,text:"创建一个新的todo, 保存在_todos中"},222:{id:222,complete:!1,text:"更新一个todo, update传需要(部分)更新的内容"}},v=u(l.prototype,{create:n,complete:o,completeAll:s,getAll:function(){return f},isAllComplete:function(){for(var t in f)if(f[t].complete===!1)return!1;return!0},emitChange:function(){this.emit(d)},addChangeListener:function(t){this.on(d,t)},removeChangeListener:function(t){this.removeListener(d,t)}});p.register(function(t){var e,s=t.action;switch(s.actionType){case h.TODO_CREATE:e=s.text.trim(),""!==e&&n(e);break;case h.TODO_UPDATE:var l=s.id;""!==s.update.text&&i(l,s.update);break;case h.TODO_COMPLETE_TOGGLE:var l=s.id;o(l);break;case h.TODO_DISTROY:var l=s.id;a(l);break;case h.CLEAR_COMPLETED:c();case h.TODO_COMPLETE_ALL:r({complete:!v.isAllComplete()});default:console.log("no store handler registed on this action: ",s.actionType)}return v.emitChange(),!0}),e.exports=v},{"../constants/todoConstants":9,"../dispatcher/appDispatcher":11,events:15,"react/lib/merge":20}],15:[function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,c,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,a=new Array(r-1),c=1;r>c;c++)a[c-1]=arguments[c];n.apply(this,a)}else if(o(n)){for(r=arguments.length,a=new Array(r-1),c=1;r>c;c++)a[c-1]=arguments[c];for(l=n.slice(),r=l.length,c=0;r>c;c++)l[c].apply(this,a)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],s=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-->0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],16:[function(t,e){function n(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var i=n.shift();i()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")}},{}],17:[function(t,e){(function(t){function n(e,n,i,r,o,s,a){if(e=e||{},"production"!==t.env.NODE_ENV&&a)throw new Error("Too many arguments passed to copyProperties");for(var c,l=[n,i,r,o,s],u=0;l[u];){c=l[u++];for(var p in c)e[p]=c[p];c.hasOwnProperty&&c.hasOwnProperty("toString")&&"undefined"!=typeof c.toString&&e.toString!==c.toString&&(e.toString=c.toString)}return e}e.exports=n}).call(this,t("1YiZ5S"))},{"1YiZ5S":16}],18:[function(t,e){(function(t){"use strict";var n=function(e,n,i,r,o,s,a,c){if("production"!==t.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===n)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[i,r,o,s,a,c],p=0;l=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return u[p++]}))}throw l.framesToPop=1,l}};e.exports=n}).call(this,t("1YiZ5S"))},{"1YiZ5S":16}],19:[function(t,e){(function(n){"use strict";var i=t("./invariant"),r=function(t){var e,r={};"production"!==n.env.NODE_ENV?i(t instanceof Object&&!Array.isArray(t),"keyMirror(...): Argument must be an object."):i(t instanceof Object&&!Array.isArray(t));for(e in t)t.hasOwnProperty(e)&&(r[e]=e);return r};e.exports=r}).call(this,t("1YiZ5S"))},{"./invariant":18,"1YiZ5S":16}],20:[function(t,e){"use strict";var n=t("./mergeInto"),i=function(t,e){var i={};return n(i,t),n(i,e),i};e.exports=i},{"./mergeInto":22}],21:[function(t,e){(function(n){"use strict";var i=t("./invariant"),r=t("./keyMirror"),o=36,s=function(t){return"object"!=typeof t||null===t},a={MAX_MERGE_DEPTH:o,isTerminal:s,normalizeMergeArg:function(t){return void 0===t||null===t?{}:t},checkMergeArrayArgs:function(t,e){"production"!==n.env.NODE_ENV?i(Array.isArray(t)&&Array.isArray(e),"Tried to merge arrays, instead got %s and %s.",t,e):i(Array.isArray(t)&&Array.isArray(e))},checkMergeObjectArgs:function(t,e){a.checkMergeObjectArg(t),a.checkMergeObjectArg(e)},checkMergeObjectArg:function(t){"production"!==n.env.NODE_ENV?i(!s(t)&&!Array.isArray(t),"Tried to merge an object, instead got %s.",t):i(!s(t)&&!Array.isArray(t))},checkMergeIntoObjectArg:function(t){"production"!==n.env.NODE_ENV?i(!(s(t)&&"function"!=typeof t||Array.isArray(t)),"Tried to merge into an object, instead got %s.",t):i(!(s(t)&&"function"!=typeof t||Array.isArray(t)))},checkMergeLevel:function(t){"production"!==n.env.NODE_ENV?i(o>t,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way."):i(o>t)},checkArrayStrategy:function(t){"production"!==n.env.NODE_ENV?i(void 0===t||t in a.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays."):i(void 0===t||t in a.ArrayStrategies)},ArrayStrategies:r({Clobber:!0,IndexByIndex:!0})};e.exports=a}).call(this,t("1YiZ5S"))},{"./invariant":18,"./keyMirror":19,"1YiZ5S":16}],22:[function(t,e){"use strict";function n(t,e){if(o(t),null!=e){r(e);for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}}var i=t("./mergeHelpers"),r=i.checkMergeObjectArg,o=i.checkMergeIntoObjectArg;e.exports=n},{"./mergeHelpers":21}]},{},[13]);